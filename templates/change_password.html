{% extends "base.html" %}

{% block content %}
<div class="container d-flex align-items-center justify-content-center min-vh-100">
    <div class="card shadow-lg border-0" style="max-width: 500px; width: 100%;">
        <div class="card-header bg-corporate text-white text-center p-4 rounded-top">
            <h3 class="mb-0"><i class="fas fa-shield-alt me-2"></i>Αλλαγή Κωδικού</h3>
        </div>
        <div class="card-body p-5 bg-white">
            <p class="text-center text-muted mb-4">
                Για λόγους ασφαλείας, παρακαλούμε αλλάξτε τον κωδικό πρόσβασής σας.
            </p>

            {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
            {% for category, message in messages %}
            <div class="alert alert-{{ 'danger' if category == 'error' else 'warning' if category == 'warning' else 'success' }} alert-dismissible fade show"
                role="alert">
                {{ message }}
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
            {% endfor %}
            {% endif %}
            {% endwith %}

            <form method="POST" action="{{ url_for('change_password') }}">
                <div class="mb-3">
                    <label class="form-label fw-bold">Τρέχων Κωδικός</label>
                    <div class="input-group">
                        <span class="input-group-text bg-light"><i class="fas fa-key"></i></span>
                        <input type="password" name="current_password" required class="form-control"
                            placeholder="Εισάγετε τον τρέχοντα κωδικό">
                    </div>
                </div>
                <div class="mb-3">
                    <label class="form-label fw-bold">Νέος Κωδικός</label>
                    <div class="input-group">
                        <span class="input-group-text bg-light"><i class="fas fa-lock"></i></span>
                        <input type="password" name="new_password" required class="form-control"
                            placeholder="Τουλάχιστον 8 χαρακτήρες">
                    </div>
                    <div class="form-text">Ο νέος κωδικός πρέπει να είναι τουλάχιστον 8 χαρακτήρες.</div>
                </div>
                <div class="mb-4">
                    <label class="form-label fw-bold">Επιβεβαίωση Νέου Κωδικού</label>
                    <div class="input-group">
                        <span class="input-group-text bg-light"><i class="fas fa-lock"></i></span>
                        <input type="password" name="confirm_password" required class="form-control"
                            placeholder="Επιβεβαιώστε τον κωδικό">
                    </div>
                </div>
                <button type="submit" class="btn btn-primary w-100 py-2 fw-bold shadow-sm">
                    <i class="fas fa-save me-2"></i>Αποθήκευση & Συνέχεια
                </button>
            </form>
        </div>
    </div>
</div>
{% endblock %}